!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var s=this._events=this._events||{},i=s[e]=s[e]||[];return-1==i.indexOf(t)&&i.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var s=this._onceEvents=this._onceEvents||{};return(s[e]=s[e]||{})[t]=!0,this}},t.off=function(e,t){var s=this._events&&this._events[e];if(s&&s.length){var i=s.indexOf(t);return-1!=i&&s.splice(i,1),this}},t.emitEvent=function(e,t){var s=this._events&&this._events[e];if(s&&s.length){var i=0,o=s[i];t=t||[];for(var l=this._onceEvents&&this._onceEvents[e];o;){var r=l&&l[o];r&&(this.off(e,o),delete l[o]),o.apply(this,t),o=s[i+=r?0:1]}return this}},e}),function(t,s){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return s(t,e)}):"object"==typeof module&&module.exports?module.exports=s(t,require("ev-emitter")):t.imagesLoaded=s(t,t.EvEmitter)}(window,function(t,e){var i=t.jQuery,o=t.console;function l(e,t){for(var s in t)e[s]=t[s];return e}function r(e,t,s){if(!(this instanceof r))return new r(e,t,s);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=function(e){var t=[];if(Array.isArray(e))t=e;else if("number"==typeof e.length)for(var s=0;s<e.length;s++)t.push(e[s]);else t.push(e);return t}(e),this.options=l({},this.options),"function"==typeof t?s=t:l(this.options,t),s&&this.on("always",s),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(function(){this.check()}.bind(this))}(r.prototype=Object.create(e.prototype)).options={},r.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},r.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&n[t]){for(var s=e.querySelectorAll("img"),i=0;i<s.length;i++){var o=s[i];this.addImage(o)}if("string"==typeof this.options.background){var l=e.querySelectorAll(this.options.background);for(i=0;i<l.length;i++){var r=l[i];this.addElementBackgroundImages(r)}}}};var n={1:!0,9:!0,11:!0};function s(e){this.img=e}function a(e,t){this.url=e,this.element=t,this.img=new Image}return r.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var s=/url\((['"])?(.*?)\1\)/gi,i=s.exec(t.backgroundImage);null!==i;){var o=i&&i[2];o&&this.addBackground(o,e),i=s.exec(t.backgroundImage)}},r.prototype.addImage=function(e){var t=new s(e);this.images.push(t)},r.prototype.addBackground=function(e,t){var s=new a(e,t);this.images.push(s)},r.prototype.check=function(){var i=this;function t(e,t,s){setTimeout(function(){i.progress(e,t,s)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},r.prototype.progress=function(e,t,s){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&o&&o.log("progress: "+s,e,t)},r.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},(s.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},s.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},s.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},s.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},s.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},s.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(a.prototype=Object.create(s.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},a.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},r.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((i=e).fn.imagesLoaded=function(e,t){return new r(this,e,t).jqDeferred.promise(i(this))})},r.makeJQueryPlugin(),r}),function(u,p,e){"use strict";function t(){if(!("scrollBehavior"in p.documentElement.style)){var e=u.HTMLElement||u.Element,r=468,d={scroll:u.scroll||u.scrollTo,scrollBy:u.scrollBy,scrollIntoView:e.prototype.scrollIntoView},c=u.performance&&u.performance.now?u.performance.now.bind(u.performance):Date.now;u.scroll=u.scrollTo=function(){i(arguments[0])?d.scroll.call(u,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):o.call(u,p.body,~~arguments[0].left,~~arguments[0].top)},u.scrollBy=function(){i(arguments[0])?d.scrollBy.call(u,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):o.call(u,p.body,~~arguments[0].left+(u.scrollX||u.pageXOffset),~~arguments[0].top+(u.scrollY||u.pageYOffset))},e.prototype.scrollIntoView=function(){if(i(arguments[0]))d.scrollIntoView.call(this,arguments[0]||!0);else{var e=function(e){for(var t,s,i;t=(e=e.parentNode)===p.body,s=e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth,i="visible"===u.getComputedStyle(e,null).overflow,!t&&(!s||i););return t=s=i=null,e}(this),t=e.getBoundingClientRect(),s=this.getBoundingClientRect();e!==p.body?(o.call(this,e,e.scrollLeft+s.left-t.left,e.scrollTop+s.top-t.top),u.scrollBy({left:t.left,top:t.top,behavior:"smooth"})):u.scrollBy({left:s.left,top:s.top,behavior:"smooth"})}}}function h(e,t){this.scrollLeft=e,this.scrollTop=t}function i(e){if("object"!=typeof e||null===e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior not valid")}function f(e){e.frame=u.requestAnimationFrame(f.bind(u,e));var t,s,i,o,l=(c()-e.startTime)/r;o=l=1<l?1:l,t=.5*(1-Math.cos(Math.PI*o)),s=e.startX+(e.x-e.startX)*t,i=e.startY+(e.y-e.startY)*t,e.method.call(e.scrollable,s,i),s!==e.x||i!==e.y||u.cancelAnimationFrame(e.frame)}function o(e,t,s){var i,o,l,r,n,a=c();e===p.body?(o=(i=u).scrollX||u.pageXOffset,l=u.scrollY||u.pageYOffset,r=d.scroll):(o=(i=e).scrollLeft,l=e.scrollTop,r=h),f({scrollable:i,method:r,startTime:a,startX:o,startY:l,x:t,y:s,frame:n})}}"object"==typeof exports?module.exports={polyfill:t}:t()}(window,document),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e($||require("jquery")):e(jQuery)}(function(D){"use strict";var o="styler",i={idSuffix:"-styler",filePlaceholder:"Файл не выбран",fileBrowse:"Обзор...",fileNumber:"Выбрано файлов: %s",selectPlaceholder:"Выберите...",selectSearch:!1,selectSearchLimit:10,selectSearchNotFound:"Совпадений не найдено",selectSearchPlaceholder:"Поиск...",selectVisibleOptions:0,selectSmartPositioning:!0,locale:"ru",locales:{en:{filePlaceholder:"No file selected",fileBrowse:"Browse...",fileNumber:"Selected files: %s",selectPlaceholder:"Select...",selectSearchNotFound:"No matches found",selectSearchPlaceholder:"Search..."}},onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};function l(e,t){this.element=e,this.options=D.extend({},i,t);var s=this.options.locale;void 0!==this.options.locales[s]&&D.extend(this.options,this.options.locales[s]),this.init()}function H(e){if(!D(e.target).parents().hasClass("jq-selectbox")&&"OPTION"!=e.target.nodeName&&D("div.jq-selectbox.opened").length){var t=D("div.jq-selectbox.opened"),s=D("div.jq-selectbox__search input",t),i=D("div.jq-selectbox__dropdown",t);t.find("select").data("_"+o).options.onSelectClosed.call(t),s.length&&s.val("").keyup(),i.hide().find("li.sel").addClass("selected"),t.removeClass("focused opened dropup dropdown")}}l.prototype={init:function(){var L=D(this.element),P=this.options,N=!(!navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||navigator.userAgent.match(/(Windows\sPhone)/i)),e=!(!navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/(Windows\sPhone)/i));function B(){void 0!==L.attr("id")&&""!==L.attr("id")&&(this.id=L.attr("id")+P.idSuffix),this.title=L.attr("title"),this.classes=L.attr("class"),this.data=L.data()}if(L.is(":checkbox")){var t=function(){var e=new B,t=D('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);L.after(t).prependTo(t),L.is(":checked")&&t.addClass("checked"),L.is(":disabled")&&t.addClass("disabled"),t.click(function(e){e.preventDefault(),L.triggerHandler("click"),t.is(".disabled")||(L.is(":checked")?(L.prop("checked",!1),t.removeClass("checked").parent().removeClass("checked")):(L.prop("checked",!0),t.addClass("checked").parent().addClass("checked")),L.focus().change())}),L.closest("label").add('label[for="'+L.attr("id")+'"]').on("click.styler",function(e){D(e.target).is("a")||D(e.target).closest(t).length||(t.triggerHandler("click"),e.preventDefault())}),L.on("change.styler",function(){L.is(":checked")?t.addClass("checked"):t.removeClass("checked")}).on("keydown.styler",function(e){32==e.which&&t.click()}).on("focus.styler",function(){t.is(".disabled")||t.addClass("focused")}).on("blur.styler",function(){t.removeClass("focused")})};t(),L.on("refresh",function(){L.closest("label").add('label[for="'+L.attr("id")+'"]').off(".styler"),L.off(".styler").parent().before(L).remove(),t()})}else if(L.is(":radio")){var s=function(){var e=new B,s=D('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);L.after(s).prependTo(s),L.is(":checked")&&s.addClass("checked"),L.is(":disabled")&&s.addClass("disabled"),D.fn.commonParents=function(){var e=this;return e.first().parents().filter(function(){return D(this).find(e).length===e.length})},D.fn.commonParent=function(){return D(this).commonParents().first()},s.click(function(e){if(e.preventDefault(),L.triggerHandler("click"),!s.is(".disabled")){var t=D('input[name="'+L.attr("name")+'"]');t.commonParent().find(t).prop("checked",!1).parent().removeClass("checked"),L.prop("checked",!0).parent().addClass("checked"),L.focus().change()}}),L.closest("label").add('label[for="'+L.attr("id")+'"]').on("click.styler",function(e){D(e.target).is("a")||D(e.target).closest(s).length||(s.triggerHandler("click"),e.preventDefault())}),L.on("change.styler",function(){L.parent().addClass("checked")}).on("focus.styler",function(){s.is(".disabled")||s.addClass("focused")}).on("blur.styler",function(){s.removeClass("focused")})};s(),L.on("refresh",function(){L.closest("label").add('label[for="'+L.attr("id")+'"]').off(".styler"),L.off(".styler").parent().before(L).remove(),s()})}else if(L.is(":file")){var i=function(){var e=new B,i=L.data("placeholder");void 0===i&&(i=P.filePlaceholder);var t=L.data("browse");void 0!==t&&""!==t||(t=P.fileBrowse);var o=D('<div class="jq-file"><div class="jq-file__name">'+i+'</div><div class="jq-file__browse">'+t+"</div></div>").attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);L.after(o).appendTo(o),L.is(":disabled")&&o.addClass("disabled");var s=L.val(),l=D("div.jq-file__name",o);s&&l.text(s.replace(/.+[\\\/]/,"")),L.on("change.styler",function(){var e=L.val();if(L.is("[multiple]")){e="";var t=L[0].files.length;if(0<t){var s=L.data("number");void 0===s&&(s=P.fileNumber),e=s=s.replace("%s",t)}}console.log(e),l.text(e.replace(/.+[\\\/]/,"")),""===e?(l.text(i),o.removeClass("changed")):o.addClass("changed")}).on("focus.styler",function(){o.addClass("focused")}).on("blur.styler",function(){o.removeClass("focused")}).on("click.styler",function(){o.removeClass("focused")})};i(),L.on("refresh",function(){L.off(".styler").parent().before(L).remove(),i()})}else if(L.is('input[type="number"]')){var o=function(){var e=new B,t=D('<div class="jq-number"><div class="jq-number__spin minus"></div><div class="jq-number__spin plus"></div></div>').attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);L.after(t).prependTo(t).wrap('<div class="jq-number__field"></div>'),L.is(":disabled")&&t.addClass("disabled");var l,r,n,s=null,i=null;void 0!==L.attr("min")&&(l=L.attr("min")),void 0!==L.attr("max")&&(r=L.attr("max")),n=void 0!==L.attr("step")&&D.isNumeric(L.attr("step"))?Number(L.attr("step")):Number(1);var o=function(e){var t,s=L.val();D.isNumeric(s)||(s=0,L.val("0")),e.is(".minus")?t=Number(s)-n:e.is(".plus")&&(t=Number(s)+n);var i=(n.toString().split(".")[1]||[]).length;if(0<i){for(var o="1";o.length<=i;)o+="0";t=Math.round(t*o)/o}D.isNumeric(l)&&D.isNumeric(r)?l<=t&&t<=r&&L.val(t):D.isNumeric(l)&&!D.isNumeric(r)?l<=t&&L.val(t):!D.isNumeric(l)&&D.isNumeric(r)?t<=r&&L.val(t):L.val(t)};t.is(".disabled")||(t.on("mousedown","div.jq-number__spin",function(){var e=D(this);o(e),s=setTimeout(function(){i=setInterval(function(){o(e)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){clearTimeout(s),clearInterval(i)}).on("mouseup","div.jq-number__spin",function(){L.change().trigger("input")}),L.on("focus.styler",function(){t.addClass("focused")}).on("blur.styler",function(){t.removeClass("focused")}))};o(),L.on("refresh",function(){L.off(".styler").closest(".jq-number").before(L).remove(),o()})}else if(L.is("select")){var l=function(){function T(t){var s=t.prop("scrollHeight")-t.outerHeight(),i=null,o=null;t.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){i=e.originalEvent.detail<0||0<e.originalEvent.wheelDelta?1:-1,o=t.scrollTop(),(s<=o&&i<0||o<=0&&0<i)&&(e.stopPropagation(),e.preventDefault())})}var I=D("option",L),S="";function A(){for(var e=0;e<I.length;e++){var t=I.eq(e),s="",i="",o="",l="",r="",n="",a="",d="",c="";t.prop("selected")&&(i="selected sel"),t.is(":disabled")&&(i="disabled"),t.is(":selected:disabled")&&(i="selected sel disabled"),void 0!==t.attr("id")&&""!==t.attr("id")&&(l=' id="'+t.attr("id")+P.idSuffix+'"'),void 0!==t.attr("title")&&""!==I.attr("title")&&(r=' title="'+t.attr("title")+'"'),void 0!==t.attr("class")&&(a=" "+t.attr("class"),c=' data-jqfs-class="'+t.attr("class")+'"');var h=t.data();for(var f in h)""!==h[f]&&(n+=" data-"+f+'="'+h[f]+'"');i+a!==""&&(o=' class="'+i+a+'"'),s="<li"+c+n+o+r+l+">"+t.html()+"</li>",t.parent().is("optgroup")&&(void 0!==t.parent().attr("class")&&(d=" "+t.parent().attr("class")),s="<li"+c+n+' class="'+i+a+" option"+d+'"'+r+l+">"+t.html()+"</li>",t.is(":first-child")&&(s='<li class="optgroup'+d+'">'+t.parent().attr("label")+"</li>"+s)),S+=s}}if(L.is("[multiple]")){if(e||N)return;!function(){var e=new B,t=D('<div class="jq-select-multiple jqselect"></div>').attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);L.after(t),A(),t.append("<ul>"+S+"</ul>");var s=D("ul",t),o=D("li",t),i=L.attr("size"),l=s.outerHeight(),r=o.outerHeight();void 0!==i&&0<i?s.css({height:r*i}):s.css({height:4*r}),l>t.height()&&(s.css("overflowY","scroll"),T(s),o.filter(".selected").length&&s.scrollTop(s.scrollTop()+o.filter(".selected").position().top)),L.prependTo(t),L.is(":disabled")?(t.addClass("disabled"),I.each(function(){D(this).is(":selected")&&o.eq(D(this).index()).addClass("selected")})):(o.filter(":not(.disabled):not(.optgroup)").click(function(e){L.focus();var t=D(this);if(e.ctrlKey||e.metaKey||t.addClass("selected"),e.shiftKey||t.addClass("first"),e.ctrlKey||e.metaKey||e.shiftKey||t.siblings().removeClass("selected first"),(e.ctrlKey||e.metaKey)&&(t.is(".selected")?t.removeClass("selected first"):t.addClass("selected first"),t.siblings().removeClass("first")),e.shiftKey){var s=!1,i=!1;t.siblings().removeClass("selected").siblings(".first").addClass("selected"),t.prevAll().each(function(){D(this).is(".first")&&(s=!0)}),t.nextAll().each(function(){D(this).is(".first")&&(i=!0)}),s&&t.prevAll().each(function(){if(D(this).is(".selected"))return!1;D(this).not(".disabled, .optgroup").addClass("selected")}),i&&t.nextAll().each(function(){if(D(this).is(".selected"))return!1;D(this).not(".disabled, .optgroup").addClass("selected")}),1==o.filter(".selected").length&&t.addClass("first")}I.prop("selected",!1),o.filter(".selected").each(function(){var e=D(this),t=e.index();e.is(".option")&&(t-=e.prevAll(".optgroup").length),I.eq(t).prop("selected",!0)}),L.change()}),I.each(function(e){D(this).data("optionIndex",e)}),L.on("change.styler",function(){o.removeClass("selected");var t=[];I.filter(":selected").each(function(){t.push(D(this).data("optionIndex"))}),o.not(".optgroup").filter(function(e){return-1<D.inArray(e,t)}).addClass("selected")}).on("focus.styler",function(){t.addClass("focused")}).on("blur.styler",function(){t.removeClass("focused")}),l>t.height()&&L.on("keydown.styler",function(e){38!=e.which&&37!=e.which&&33!=e.which||s.scrollTop(s.scrollTop()+o.filter(".selected").position().top-r),40!=e.which&&39!=e.which&&34!=e.which||s.scrollTop(s.scrollTop()+o.filter(".selected:last").position().top-s.innerHeight()+2*r)}))}()}else!function(){var e=new B,t="",s=L.data("placeholder"),i=L.data("search"),o=L.data("search-limit"),l=L.data("search-not-found"),r=L.data("search-placeholder"),a=L.data("smart-positioning");void 0===s&&(s=P.selectPlaceholder),void 0!==i&&""!==i||(i=P.selectSearch),void 0!==o&&""!==o||(o=P.selectSearchLimit),void 0!==l&&""!==l||(l=P.selectSearchNotFound),void 0===r&&(r=P.selectSearchPlaceholder),void 0!==a&&""!==a||(a=P.selectSmartPositioning);var d=D('<div class="jq-selectbox jqselect"><div class="jq-selectbox__select"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>').attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);L.after(d).prependTo(d);var c=d.css("z-index");c=0<c?c:1;var n=D("div.jq-selectbox__select",d),h=D("div.jq-selectbox__select-text",d),f=I.filter(":selected");A(),i&&(t='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+r+'"></div><div class="jq-selectbox__not-found">'+l+"</div>");var u=D('<div class="jq-selectbox__dropdown">'+t+"<ul>"+S+"</ul></div>");d.append(u);var p=D("ul",u),v=D("li",u),m=D("input",u),g=D("div.jq-selectbox__not-found",u).hide();v.length<o&&m.parent().hide(),""===I.first().text()&&I.first().is(":selected")&&!1!==s?h.text(s).addClass("placeholder"):h.text(f.text());var b=0,y=0;if(v.css({display:"inline-block"}),v.each(function(){var e=D(this);e.innerWidth()>b&&(b=e.innerWidth(),y=e.width())}),v.css({display:""}),h.is(".placeholder")&&h.width()>b)h.width(h.width());else{var w=d.clone().appendTo("body").width("auto"),x=w.outerWidth();w.remove(),x==d.outerWidth()&&h.width(y)}b>d.width()&&u.width(b),""===I.first().text()&&""!==L.data("placeholder")&&v.first().hide();var C=d.outerHeight(!0),_=m.parent().outerHeight(!0)||0,k=p.css("max-height"),j=v.filter(".selected");if(j.length<1&&v.first().addClass("selected sel"),void 0===v.data("li-height")){var q=v.outerHeight();!1!==s&&(q=v.eq(1).outerHeight()),v.data("li-height",q)}var E=u.css("top");if("auto"==u.css("left")&&u.css({left:0}),"auto"==u.css("top")&&(u.css({top:C}),E=C),u.hide(),j.length&&(I.first().text()!=f.text()&&d.addClass("changed"),d.data("jqfs-class",j.data("jqfs-class")),d.addClass(j.data("jqfs-class"))),L.is(":disabled"))return d.addClass("disabled");n.click(function(){if(D("div.jq-selectbox").filter(".opened").length&&P.onSelectClosed.call(D("div.jq-selectbox").filter(".opened")),L.focus(),!N){var t=D(window),s=v.data("li-height"),i=d.offset().top,o=t.height()-C-(i-t.scrollTop()),e=L.data("visible-options");void 0!==e&&""!==e||(e=P.selectVisibleOptions);var l=5*s,r=s*e;0<e&&e<6&&(l=r),0===e&&(r="auto");var n=function(){u.height("auto").css({bottom:"auto",top:E});var e=function(){p.css("max-height",Math.floor((o-20-_)/s)*s)};e(),p.css("max-height",r),"none"!=k&&p.css("max-height",k),o<u.outerHeight()+20&&e()};!0===a||1===a?l+_+20<o?(n(),d.removeClass("dropup").addClass("dropdown")):(function(){u.height("auto").css({top:"auto",bottom:E});var e=function(){p.css("max-height",Math.floor((i-t.scrollTop()-20-_)/s)*s)};e(),p.css("max-height",r),"none"!=k&&p.css("max-height",k),i-t.scrollTop()-20<u.outerHeight()+20&&e()}(),d.removeClass("dropdown").addClass("dropup")):!1===a||0===a?l+_+20<o&&(n(),d.removeClass("dropup").addClass("dropdown")):(u.height("auto").css({bottom:"auto",top:E}),p.css("max-height",r),"none"!=k&&p.css("max-height",k)),d.offset().left+u.outerWidth()>t.width()&&u.css({left:"auto",right:0}),D("div.jqselect").css({zIndex:c-1}).removeClass("opened"),d.css({zIndex:c}),u.is(":hidden")?(D("div.jq-selectbox__dropdown:visible").hide(),u.show(),d.addClass("opened focused"),P.onSelectOpened.call(d)):(u.hide(),d.removeClass("opened dropup dropdown"),D("div.jq-selectbox").filter(".opened").length&&P.onSelectClosed.call(d)),m.length&&(m.val("").keyup(),g.hide(),m.keyup(function(){var e=D(this).val();v.each(function(){D(this).html().match(new RegExp(".*?"+e+".*?","i"))?D(this).show():D(this).hide()}),""===I.first().text()&&""!==L.data("placeholder")&&v.first().hide(),v.filter(":visible").length<1?g.show():g.hide()})),v.filter(".selected").length&&(""===L.val()?p.scrollTop(0):(p.innerHeight()/s%2!=0&&(s/=2),p.scrollTop(p.scrollTop()+v.filter(".selected").position().top-p.innerHeight()/2+s))),T(p)}}),v.hover(function(){D(this).siblings().removeClass("selected")}),v.filter(".selected").text(),v.filter(":not(.disabled):not(.optgroup)").click(function(){L.focus();var e=D(this),t=e.text();if(!e.is(".selected")){var s=e.index();s-=e.prevAll(".optgroup").length,e.addClass("selected sel").siblings().removeClass("selected sel"),I.prop("selected",!1).eq(s).prop("selected",!0),h.text(t),d.data("jqfs-class")&&d.removeClass(d.data("jqfs-class")),d.data("jqfs-class",e.data("jqfs-class")),d.addClass(e.data("jqfs-class")),L.change()}u.hide(),d.removeClass("opened dropup dropdown"),P.onSelectClosed.call(d)}),u.mouseout(function(){D("li.sel",u).addClass("selected")}),L.on("change.styler",function(){h.text(I.filter(":selected").text()).removeClass("placeholder"),v.removeClass("selected sel").not(".optgroup").eq(L[0].selectedIndex).addClass("selected sel"),I.first().text()!=v.filter(".selected").text()?d.addClass("changed"):d.removeClass("changed")}).on("focus.styler",function(){d.addClass("focused"),D("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",function(){d.removeClass("focused")}).on("keydown.styler keyup.styler",function(e){var t=v.data("li-height");""===L.val()?h.text(s).addClass("placeholder"):h.text(I.filter(":selected").text()),v.removeClass("selected sel").not(".optgroup").eq(L[0].selectedIndex).addClass("selected sel"),38!=e.which&&37!=e.which&&33!=e.which&&36!=e.which||(""===L.val()?p.scrollTop(0):p.scrollTop(p.scrollTop()+v.filter(".selected").position().top)),40!=e.which&&39!=e.which&&34!=e.which&&35!=e.which||p.scrollTop(p.scrollTop()+v.filter(".selected").position().top-p.innerHeight()+t),13==e.which&&(e.preventDefault(),u.hide(),d.removeClass("opened dropup dropdown"),P.onSelectClosed.call(d))}).on("keydown.styler",function(e){32==e.which&&(e.preventDefault(),n.click())}),H.registered||(D(document).on("click",H),H.registered=!0)}()};l(),L.on("refresh",function(){L.off(".styler").parent().before(L).remove(),l()})}else L.is(":reset")&&L.on("click",function(){setTimeout(function(){L.closest("form").find("input, select").trigger("refresh")},1)})},destroy:function(){var e=D(this.element);e.is(":checkbox")||e.is(":radio")?(e.removeData("_"+o).off(".styler refresh").removeAttr("style").parent().before(e).remove(),e.closest("label").add('label[for="'+e.attr("id")+'"]').off(".styler")):e.is('input[type="number"]')?e.removeData("_"+o).off(".styler refresh").closest(".jq-number").before(e).remove():(e.is(":file")||e.is("select"))&&e.removeData("_"+o).off(".styler refresh").removeAttr("style").parent().before(e).remove()}},D.fn[o]=function(t){var s,i=arguments;return void 0===t||"object"==typeof t?(this.each(function(){D.data(this,"_"+o)||D.data(this,"_"+o,new l(this,t))}).promise().done(function(){var e=D(this[0]).data("_"+o);e&&e.options.onFormStyled.call()}),this):"string"==typeof t&&"_"!==t[0]&&"init"!==t?(this.each(function(){var e=D.data(this,"_"+o);e instanceof l&&"function"==typeof e[t]&&(s=e[t].apply(e,Array.prototype.slice.call(i,1)))}),void 0!==s?s:this):void 0},H.registered=!1}),function(o){o.extend({uploadPreview:function(e){var i=o.extend({input_field:".image-input",preview_box:".image-preview",label_field:".image-label",label_default:"Choose File",label_selected:"Change File",no_label:!1,success_callback:null},e);if(!(window.File&&window.FileList&&window.FileReader))return alert("You need a browser with file reader support, to use this form properly."),!1;void 0!==o(i.input_field)&&null!==o(i.input_field)&&o(i.input_field).change(function(){var e=this.files;if(0<e.length){var s=e[0],t=new FileReader;t.addEventListener("load",function(e){var t=e.target;s.type.match("image")?(o(i.preview_box).css("background-image","url("+t.result+")"),o(i.preview_box).css("background-size","cover"),o(i.preview_box).css("background-position","center center")):s.type.match("audio")?o(i.preview_box).html("<audio controls><source src='"+t.result+"' type='"+s.type+"' />Your browser does not support the audio element.</audio>"):alert("This file type is not supported yet.")}),0==i.no_label&&o(i.label_field).html(i.label_selected),t.readAsDataURL(s),i.success_callback&&i.success_callback()}else 0==i.no_label&&o(i.label_field).html(i.label_default),o(i.preview_box).css("background-image","none"),o(i.preview_box+" audio").remove()})}})}(jQuery);